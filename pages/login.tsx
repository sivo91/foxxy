

import React, { useState, FormEvent } from 'react';
import axios from 'axios';
import { toast } from 'react-toastify';
import { useRouter } from 'next/router';
import Link from 'next/link';
import { useDispatch } from 'react-redux'
import { userLogin } from '@/reduxFile/userSlice';



const Login: React.FC = () => {



  const router = useRouter();
  const dispatch = useDispatch()


  const [email, setEmail] = useState<string>('');
  const [password, setPassword] = useState<string>('');
  const [process, setProcess] = useState<boolean>(false);

  const data = { email, password };

  //const handleLogin = async (e: FormEvent<HTMLFormElement>): Promise<void> => {
  const handleLogin = async (e: FormEvent) => {
    e.preventDefault();

    const config = {
      headers: {
        "Content-Type": "application/json",
      },
    };

    try {
      setProcess(true);
      const res = await axios.post('/api/user/login', data, config);
       dispatch(userLogin(res.data.userData))
       
      toast.success(res.data.message);
      router.push('/');
      setProcess(false);

    } catch (error: any) {
      console.error(error);
      toast.error(error.response.data.message);
      setProcess(false);
    }
  };


  return (
    <>
      
      <h3 className='text-center mt-5'>Sign In</h3>
     
      

      <form onSubmit={handleLogin}>
        <div className="mb-3">

          <label htmlFor="email" className="form-label">
            Email
          </label>
          <input 
              type="email" 
              className="form-control" 
              id="email" 
              value={email}
              onChange={e => {
                // ensure value without space
                const newValue = e.target.value;
                setEmail(newValue.startsWith(' ') ? newValue.trim() : newValue);
              }} 
            />
        </div>

        <div className="mb-3">
          <label htmlFor="password" className="form-label">
            Password
          </label>
          <input type="password" 
                 className="form-control" 
                 id="password" 
                 value={password}
                 onChange={ e => {
                  // ensure value without space
                    const newValue = e.target.value
                    setPassword(newValue.startsWith(' ') ? newValue.trim() : newValue)
                 }}
                 placeholder="Enter your password" />
        </div>

  
        <button type="submit" 
                disabled={process}
                className="btn btn-primary w-100 my-3 rounded-1">
          { process ? 'Processing' : 'Submit' }
        </button>

        <hr />

        <div className='mt-3 d-flex justify-content-between mx-1'>
          <Link href={'/'}
                style={{textDecoration: 'none'}}>
            Forgot Password
          </Link>

          <Link href={'/signUp'}
                style={{textDecoration: 'none'}}>
            Sign Up
          </Link>
        </div>
      </form>

      <style jsx>{`
        form {
          position: relative;
          width : 400px;
          margin: 50px auto;
          border: 1px solid gray;
          padding: 40px;
          border-radius: 7px;
          background-color: white;
          box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }
      `}</style>
  
    </>
  );
};

export default Login




 

 

/* 
              <svg
                width="3848"
                height="41"
                viewBox="0 0 3848 41"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                style={{color: 'blue'}}>
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M2716 41H2726.44H3046.89H3367.33H3687.78H3848L3847.93 0C3808.33 0 3788.61 8.62746 3768.72 17.3301L3768.67 17.352C3748.54 26.1592 3728.23 35.0339 3687.78 35.0339L3687.72 35.0339C3647.27 35.0339 3626.93 26.1593 3606.78 17.3523L3606.73 17.3306C3586.82 8.62769 3567.07 0 3527.48 0C3487.89 0 3468.17 8.62746 3448.28 17.3301L3448.23 17.352C3428.1 26.1592 3407.78 35.0339 3367.33 35.0339L3367.28 35.0339C3326.83 35.0339 3306.49 26.1593 3286.33 17.3523L3286.29 17.3306C3266.37 8.62769 3246.63 0 3207.04 0C3167.44 0 3147.73 8.62746 3127.83 17.3301L3127.78 17.352C3107.65 26.1592 3087.34 35.0339 3046.89 35.0339L3046.83 35.0339C3006.38 35.0339 2986.04 26.1593 2965.89 17.3523L2965.84 17.3306C2945.93 8.62769 2926.18 0 2886.59 0C2847 0 2827.28 8.62746 2807.39 17.3301L2807.34 17.352C2787.21 26.1591 2766.89 35.0338 2726.44 35.0339H2726.39C2685.94 35.0339 2665.6 26.1593 2645.45 17.3523L2645.4 17.3306C2625.48 8.62769 2605.74 0 2566.15 0C2564.74 0 2563.36 0.0108948 2562 0.032299C2560.64 0.0108948 2559.26 0 2557.85 0C2518.26 0 2498.52 8.62769 2478.61 17.3306L2478.56 17.3523C2458.4 26.1593 2438.06 35.0339 2397.61 35.0339H2397.56C2357.11 35.0338 2336.79 26.1591 2316.66 17.352L2316.61 17.3301C2296.72 8.62746 2277 0 2237.41 0C2197.82 0 2178.08 8.62769 2158.16 17.3306L2158.11 17.3523C2137.96 26.1593 2117.62 35.0339 2077.17 35.0339L2077.11 35.0339C2036.67 35.0339 2016.35 26.1592 1996.22 17.352L1996.17 17.3301C1976.28 8.62746 1956.56 0 1916.97 0C1877.37 0 1857.63 8.62769 1837.72 17.3306L1837.67 17.3523C1817.51 26.1593 1797.17 35.0339 1756.73 35.0339L1756.67 35.0339C1716.22 35.0339 1695.9 26.1592 1675.77 17.352L1675.72 17.3301C1655.83 8.62746 1636.11 0 1596.52 0C1556.93 0 1537.19 8.62769 1517.27 17.3306L1517.22 17.3523C1497.38 26.0232 1477.36 34.7597 1438.14 35.0276C1400.75 34.7718 1382.59 26.7937 1363.78 18.5245C1362.89 18.134 1362 17.7429 1361.1 17.352L1361.05 17.3301C1341.16 8.62747 1321.44 0 1281.85 0C1280.88 0 1279.92 0.00522614 1278.96 0.0155563C1278.01 0.00522614 1277.05 0 1276.08 0V0.0632782C1240.29 0.860477 1221.53 9.06158 1202.6 17.3306L1202.55 17.3523C1182.4 26.1593 1162.06 35.0339 1121.61 35.0339H1121.56C1081.11 35.0338 1060.79 26.1591 1040.66 17.352L1040.61 17.3301C1020.72 8.62747 1001 0 961.409 0C921.817 0 902.074 8.62769 882.159 17.3306L882.11 17.3523C861.957 26.1593 841.616 35.0339 801.168 35.0339L801.112 35.0339C760.664 35.0339 740.345 26.1592 720.216 17.352L720.166 17.3301C700.275 8.62747 680.556 0 640.964 0C601.372 0 581.629 8.62769 561.715 17.3306L561.665 17.3523C541.512 26.1593 521.171 35.0339 480.723 35.0339L480.667 35.0339C440.219 35.0339 419.901 26.1592 399.771 17.352L399.721 17.3301C379.83 8.62747 360.111 0 320.519 0C280.927 0 261.185 8.62769 241.27 17.3306L241.22 17.3523C221.067 26.1593 200.727 35.0339 160.278 35.0339L160.222 35.0339C119.774 35.0339 99.4558 26.1592 79.3262 17.352L79.2761 17.3301C59.3853 8.62747 39.6663 0 0.0744629 0L0 41H160.222H480.667H801.112H1121.56H1276H1436.22H1440H1756.67H2077.11H2397.56H2408H2716Z"
                  fill="currentColor"
                />
              </svg>

              <svg
                  width="3848"
                  height="40"
                  viewBox="0 0 3848 40"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M0 0V5.82055C38.6531 5.82055 57.0963 13.7273 76.224 21.9275L76.2271 21.9288C77.1145 22.3093 78.0033 22.6903 78.8958 23.0712L78.9457 23.0925C98.8365 31.583 118.555 40 158.147 40C197.74 40 217.482 31.5827 237.397 23.0921L237.446 23.0709C257.599 14.4787 277.94 5.82055 318.388 5.82055H318.444C358.892 5.82064 379.21 14.4789 399.34 23.0712L399.389 23.0925C419.28 31.583 438.999 40 478.591 40C518.183 40 537.926 31.5827 557.841 23.0921L557.89 23.0709C578.043 14.4787 598.384 5.82055 638.832 5.82055L638.888 5.82056C679.336 5.82056 699.655 14.4789 719.784 23.0712L719.834 23.0925C739.725 31.583 759.444 40 799.036 40C838.628 40 858.371 31.5827 878.285 23.0921L878.335 23.0709C898.488 14.4787 918.829 5.82055 959.277 5.82055L959.333 5.82056C999.781 5.82056 1020.1 14.4789 1040.23 23.0712L1040.28 23.0925C1060.17 31.583 1079.89 40 1119.48 40C1159.07 40 1178.82 31.5827 1198.73 23.0921L1198.78 23.0709C1218.93 14.4787 1239.27 5.82055 1279.72 5.82055L1279.78 5.82056C1320.23 5.82056 1340.54 14.4789 1360.67 23.0712L1360.72 23.0925C1380.61 31.583 1400.33 40 1439.93 40V39.9911C1440.66 39.997 1441.4 40 1442.15 40C1481.74 40 1501.48 31.5827 1521.4 23.0921L1521.45 23.0709C1541.6 14.4787 1561.94 5.82055 1602.39 5.82055H1602.44C1642.89 5.82064 1663.21 14.4789 1683.34 23.0712L1683.39 23.0925C1703.28 31.583 1723 40 1762.59 40C1802.18 40 1821.93 31.5827 1841.84 23.0921L1841.89 23.0709C1862.04 14.4787 1882.38 5.82055 1922.83 5.82055L1922.89 5.82056C1963.34 5.82056 1983.65 14.4789 2003.78 23.0712L2003.83 23.0925C2023.73 31.583 2043.44 40 2083.04 40C2122.63 40 2142.37 31.5827 2162.29 23.0921L2162.33 23.0709C2182.49 14.4787 2202.83 5.82055 2243.28 5.82055L2243.33 5.82056C2283.78 5.82056 2304.1 14.4789 2324.23 23.0712L2324.28 23.0925C2344.17 31.583 2363.89 40 2403.48 40C2443.07 40 2462.82 31.5827 2482.73 23.0921L2482.78 23.0709C2502.93 14.4787 2523.27 5.82055 2563.72 5.82055L2563.78 5.82056C2604.23 5.82056 2624.54 14.4789 2644.67 23.0712L2644.72 23.0925C2664.61 31.583 2684.33 40 2723.93 40V39.9911C2724.66 39.997 2725.4 40 2726.15 40C2765.74 40 2785.48 31.5827 2805.4 23.0921L2805.45 23.0709C2825.6 14.4787 2845.94 5.82055 2886.39 5.82055H2886.44C2926.89 5.82064 2947.21 14.4789 2967.34 23.0712L2967.39 23.0925C2987.28 31.583 3007 40 3046.59 40C3086.18 40 3105.93 31.5827 3125.84 23.0921L3125.89 23.0709C3146.04 14.4787 3166.38 5.82055 3206.83 5.82055L3206.89 5.82056C3247.34 5.82056 3267.65 14.4789 3287.78 23.0712L3287.83 23.0925C3307.73 31.583 3327.44 40 3367.04 40C3406.63 40 3426.37 31.5827 3446.29 23.0921L3446.33 23.0709C3466.49 14.4787 3486.83 5.82055 3527.28 5.82055L3527.33 5.82056C3567.78 5.82056 3588.1 14.4789 3608.23 23.0712L3608.28 23.0925C3628.17 31.583 3647.89 40 3687.48 40C3727.07 40 3746.82 31.5827 3766.73 23.0921L3766.78 23.0709C3786.93 14.4787 3807.27 5.82055 3847.72 5.82055L3847.78 0H0Z"
                    fill="currentColor"
                  />
              </svg>


               <svg
                width="1924"
                height="21"
                viewBox="0 0 1924 21"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                
              >
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M1358 21H1363.22H1523.44H1683.67H1843.89H1924L1923.96 0.5C1904.17 0.5 1894.31 4.81373 1884.36 9.16507L1884.34 9.17599C1874.27 13.5796 1864.11 18.017 1843.89 18.017L1843.86 18.017C1823.64 18.017 1813.47 13.5796 1803.39 9.17616L1803.37 9.16531C1793.41 4.81384 1783.54 0.5 1763.74 0.5C1743.94 0.5 1734.08 4.81373 1724.14 9.16507L1724.11 9.17599C1714.05 13.5796 1703.89 18.017 1683.67 18.017L1683.64 18.017C1663.41 18.017 1653.24 13.5796 1643.17 9.17616L1643.14 9.16531C1633.19 4.81384 1623.31 0.5 1603.52 0.5C1583.72 0.5 1573.86 4.81373 1563.92 9.16507L1563.89 9.17599C1553.83 13.5796 1543.67 18.017 1523.44 18.017L1523.42 18.017C1503.19 18.017 1493.02 13.5796 1482.95 9.17616L1482.92 9.16531C1472.96 4.81384 1463.09 0.5 1443.3 0.5C1423.5 0.5 1413.64 4.81373 1403.69 9.16507L1403.67 9.17599C1393.6 13.5796 1383.45 18.0169 1363.22 18.017H1363.19C1342.97 18.017 1332.8 13.5796 1322.72 9.17616L1322.7 9.16531C1312.74 4.81384 1302.87 0.5 1283.07 0.5C1282.37 0.5 1281.68 0.505447 1281 0.51615C1280.32 0.505447 1279.63 0.5 1278.93 0.5C1259.13 0.5 1249.26 4.81384 1239.3 9.16531L1239.28 9.17616C1229.2 13.5796 1219.03 18.017 1198.81 18.017H1198.78C1178.56 18.0169 1168.4 13.5796 1158.33 9.17599L1158.31 9.16507C1148.36 4.81373 1138.5 0.5 1118.71 0.5C1098.91 0.5 1089.04 4.81384 1079.08 9.16531L1079.06 9.17616C1068.98 13.5796 1058.81 18.017 1038.59 18.017L1038.56 18.017C1018.33 18.017 1008.17 13.5796 998.109 9.17599L998.084 9.16507C988.139 4.81373 978.279 0.5 958.483 0.5C938.687 0.5 928.816 4.81384 918.858 9.16531L918.834 9.17616C908.757 13.5796 898.587 18.017 878.363 18.017L878.335 18.017C858.11 18.017 847.951 13.5796 837.886 9.17599L837.862 9.16507C827.916 4.81373 818.057 0.5 798.261 0.5C778.465 0.5 768.593 4.81384 758.636 9.16531L758.611 9.17616C748.691 13.5116 738.679 17.8799 719.071 18.0138C700.375 17.8859 691.297 13.8969 681.888 9.76224C681.444 9.56702 680.999 9.37147 680.552 9.17599L680.527 9.16507C670.582 4.81373 660.722 0.5 640.926 0.5C640.439 0.5 639.958 0.502613 639.482 0.507778C639.007 0.502613 638.526 0.5 638.038 0.5V0.531639C620.146 0.930239 610.763 5.03079 601.302 9.16531L601.277 9.17616C591.2 13.5796 581.03 18.017 560.806 18.017H560.778C540.554 18.0169 530.395 13.5796 520.33 9.17599L520.305 9.16507C510.36 4.81373 500.5 0.5 480.704 0.5C460.908 0.5 451.037 4.81384 441.08 9.16531L441.055 9.17616C430.979 13.5796 420.808 18.017 400.584 18.017L400.556 18.017C380.332 18.017 370.173 13.5796 360.108 9.17599L360.083 9.16507C350.137 4.81373 340.278 0.5 320.482 0.5C300.686 0.5 290.815 4.81384 280.857 9.16531L280.833 9.17616C270.756 13.5796 260.586 18.017 240.362 18.017L240.334 18.017C220.109 18.017 209.95 13.5796 199.885 9.17599L199.86 9.16507C189.915 4.81373 180.056 0.5 160.26 0.5C140.464 0.5 130.592 4.81384 120.635 9.16531L120.61 9.17616C110.534 13.5796 100.363 18.017 80.1392 18.017L80.1112 18.017C59.887 18.017 49.7279 13.5796 39.6631 9.17599L39.6381 9.16507C29.6926 4.81373 19.8331 0.5 0.0372314 0.5L0 21H80.1112H240.334H400.556H560.778H638.001H718.112H720H878.335H1038.56H1198.78H1204H1358Z"
                  fill="currentColor"
                />
              </svg>

              <svg
                width="1925"
                height="21"
                viewBox="0 0 1925 21"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M1765.55 0H1924.78V2.98321C1905.45 2.98321 1896.23 7.03565 1886.66 11.2385L1886.66 11.239C1886.22 11.434 1885.77 11.6294 1885.33 11.8247L1885.3 11.8356C1875.36 16.1872 1865.5 20.5012 1845.7 20.5012C1825.9 20.5012 1816.03 16.1871 1806.07 11.8354L1806.05 11.8245C1795.97 7.42078 1785.8 2.98321 1765.57 2.98321H1765.55C1745.32 2.98325 1735.16 7.42086 1725.1 11.8247L1725.07 11.8356C1715.13 16.1872 1705.27 20.5012 1685.47 20.5012C1665.67 20.5012 1655.8 16.1871 1645.84 11.8354L1645.82 11.8245C1635.74 7.42078 1625.57 2.98321 1605.34 2.98321L1605.32 2.98321C1585.09 2.98321 1574.93 7.42084 1564.86 11.8247L1564.84 11.8356C1554.89 16.1872 1545.03 20.5012 1525.24 20.5012C1505.44 20.5012 1495.57 16.1871 1485.61 11.8354L1485.58 11.8245C1475.51 7.42078 1465.34 2.98321 1445.11 2.98321L1445.08 2.98321C1424.86 2.98321 1414.7 7.42084 1404.63 11.8247L1404.61 11.8356C1394.66 16.1872 1384.8 20.5012 1365 20.5012C1345.21 20.5012 1335.34 16.1871 1325.38 11.8354L1325.35 11.8245C1315.28 7.42078 1305.11 2.98321 1284.88 2.98321L1284.85 2.98321C1264.63 2.98321 1254.47 7.42084 1244.4 11.8247L1244.38 11.8356C1234.43 16.1872 1224.57 20.5012 1204.77 20.5012V20.4966C1204.41 20.4996 1204.04 20.5012 1203.66 20.5012C1183.86 20.5012 1173.99 16.1871 1164.04 11.8354L1164.01 11.8245C1153.93 7.42079 1143.76 2.98321 1123.54 2.98321H1123.51C1103.28 2.98325 1093.12 7.42086 1083.06 11.8247L1083.03 11.8356C1073.09 16.1872 1063.23 20.5012 1043.43 20.5012C1023.63 20.5012 1013.76 16.1871 1003.8 11.8354L1003.78 11.8245C993.702 7.42079 983.531 2.98321 963.306 2.98321L963.278 2.98321C943.053 2.98321 932.893 7.42084 922.827 11.8247L922.802 11.8356C912.857 16.1872 902.996 20.5012 883.199 20.5012C863.402 20.5012 853.53 16.1871 843.572 11.8354L843.548 11.8245C833.471 7.42079 823.3 2.98321 803.074 2.98321L803.046 2.98321C782.821 2.98321 772.661 7.42084 762.596 11.8247L762.571 11.8356C752.625 16.1872 742.765 20.5012 722.968 20.5012C703.17 20.5012 693.299 16.1871 683.341 11.8354L683.316 11.8245C673.239 7.42079 663.068 2.98321 642.843 2.98321L642.815 2.98321C622.589 2.98321 612.43 7.42084 602.364 11.8247L602.339 11.8356C592.393 16.1872 582.533 20.5012 562.736 20.5012V20.4966C562.369 20.4996 561.999 20.5012 561.625 20.5012C541.828 20.5012 531.956 16.1871 521.998 11.8354L521.973 11.8245C511.896 7.42078 501.725 2.98321 481.5 2.98321H481.472C461.247 2.98325 451.087 7.42086 441.022 11.8247L440.997 11.8356C431.051 16.1872 421.191 20.5012 401.394 20.5012C381.597 20.5012 371.725 16.1871 361.767 11.8354L361.742 11.8245C351.665 7.42078 341.494 2.98321 321.269 2.98321L321.241 2.98321C301.016 2.98321 290.856 7.42084 280.79 11.8247L280.765 11.8356C270.819 16.1872 260.959 20.5012 241.162 20.5012C221.365 20.5012 211.493 16.1871 201.535 11.8354L201.51 11.8245C191.434 7.42078 181.262 2.98321 161.037 2.98321L161.009 2.98321C140.784 2.98321 130.624 7.42084 120.559 11.8247L120.534 11.8356C110.588 16.1872 100.728 20.5012 80.9307 20.5012C61.1333 20.5012 51.2615 16.1871 41.3037 11.8354L41.2788 11.8245C31.2019 7.42078 21.0308 2.98321 0.805542 2.98321L0.777588 0H161.009H321.241H481.472H562.699H640.703H642.815H803.046H963.278H1123.51H1204.74H1282.74H1284.85H1445.08H1605.32H1765.55Z"
                  fill="currentColor"
                />
              </svg>
 */


